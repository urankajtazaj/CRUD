{% extends 'admin.html.twig' %}

{% block title %}Admin{% endblock %}


{% block body %}
<h1>Blog statistics</h1>
<hr>
<br><br>
<div class="row justify-content-center">
    <div class="col-md-3 col-sm-6 col-12">
        <div class="info-box">
            <a href="{{ path('admin_posts') }}">
                <h1 class="display-3">{{ posts | length }}</h1>
                <h4>Posts</h4>
                <hr>
                {% set maxPosts = 5 %}
                <p class="text-dark"><b>Recent posts</b></p>
                {% set break = false %}
                {% for post in posts if not break %}
                    <a target="_blank" href="{{ path('post_single', {'slug': post.slug}) }}">{{ post.title }}</a><br>
                    {% if loop.index == maxPosts %}
                        {% set break = true %}
                        {% if posts | length > maxPosts %}
                            <br>
                            <a href="{{ path('admin_posts') }}" class="btn btn-secondary">View all posts</a>
                        {% endif %}
                    {% endif %}
                {% endfor %}
            </a>
        </div>
    </div>
    <div class="col-md-3 col-sm-6 col-12">
        <div class="info-box">
            <a href="{{ path('comments') }}">
                <h1 class="display-3">{{ comments | length}}</h1>
                <h4>Comments</h4>
                <hr>
                <p class="text-dark"><b>Recent comments</b></p>
                {% set break = false %}
                {% for comment in comments if not break %}
                    <a target="_blank" href="{{ path('post_single', {'slug': comment.post.slug}) }}#comments">{{ comment.user.name }} <i>commented on</i> {{ comment.post.title }}</a><br>
                    {% if loop.index == maxPosts %}
                        {% set break = true %}
                        {% if comments | length > maxPosts %}
                            <br>
                            <a href="#" class="btn btn-secondary">View all posts</a>
                        {% endif %}
                    {% endif %}
                {% endfor %}
            </a>
        </div>
    </div>
    <div class="col-md-3 col-sm-6 col-12">
        <div class="info-box">
            <a href="{{ path('users') }}">
                <h1 class="display-3">{{ users | length }}</h1>
                <h4>Users</h4>
                <hr>
                <p class="text-dark"><b>Recently registered users</b></p>
                {% set break = false %}
                {% for user in users if not break %}
                    <a target="_blank" href="#">{{ user.name }}</a><br>
                    {% if loop.index == maxPosts %}
                        {% set break = true %}
                        {% if users | length > maxPosts %}
                            <br>
                            <a href="#" class="btn btn-secondary">View all posts</a>
                        {% endif %}
                    {% endif %}
                {% endfor %}
            </a>
        </div>
    </div>
</div>
{% endblock %}