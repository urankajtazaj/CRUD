{% extends 'base.html.twig' %}

{% block title %}{{ headline }}{% endblock %}

{% block stylesheets %}
<script src="{{ asset('js/ckeditor/ckeditor.js') }}"></script>
{% endblock %}

{% block body %}
{{ form_start(form) }}
<div class="row">
    <div class="col-md-8 col-12">
        <div class="col-md-12 col-12">
            {{ form_widget(form.save) }}

            {% if post is defined %}
            <a href="{{ path('post_single', {'id': post.id}) }}" target="_blank" class="float-right btn btn-lg btn-secondary"><i class="fas fa-external-link-alt"></i> View post</a>
            {% endif %}
        </div>
        <br>
        <hr>
        <div class="post">
            <h3>{{ headline }}</h3>
            <br>
            <br>

            <div class="form-group">
                {{ form_row(form.title) }}
            </div>

            <div class="form-group">
                {{ form_row(form.content) }}
            </div>

            <div class="form-group">
                {{ form_label(form.category) }}<small><a href="{{ path('category_add') }}" class="btn"><i class="fas fa-plus"></i></a></small>
                {{ form_widget(form.category) }}
            </div>
        </div>
    </div>

    <div class="col-md-4 col-12">
        <br>
        <br>
        <br>
        <br>

        <div class="form-group">
            {{ form_row(form.cover) }}
        </div>

        {% if post is defined and post.cover %}
            <div class="form-group">
                Current image<br>
                <div class="img post-thumbnail">
                    <img src="{{ asset('uploads/images/' ~ cover_img) }}" alt="{{ post.title }}">
                </div>
            </div>
            <div class="form-group">
                {{ form_widget(form.delete_cover) }} {{ form_label(form.delete_cover) }}
            </div>
        {% else %}
                {{ form_widget(form.delete_cover, {'attr': { 'class': 'd-hidden' }}) }}
        {% endif %}
    </div>
</div>
{{ form_end(form) }}
{% endblock %}


{% block javascripts %}
<script>
    CKEDITOR.replace('post_form_content');
</script>
{% endblock %}