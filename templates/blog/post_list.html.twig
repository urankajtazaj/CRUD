{% extends 'base.html.twig' %}

{% block title %}All posts{% endblock %}

{% block body %}

{# <div class="row">
    <div class="col-md-12 col-12">
        {{ form_start(form) }}
        <div class="post card">
            <div class="row align-items-center">
                <div class="col-md-10 col-12">
                    {{ form_row(form.query) }}
                </div>
                <div class="col-md-2 col-12">
                    {{ form_row(form.search) }}
                </div>
            </div>
        </div>
        {{ form_end(form) }}
    </div>
</div> #}
<div class="row">
    {% if posts %}
    {% for post in posts %}
    <div class="col-md-6 col-12">
        <div class="post card">
            <a href="{{ path('post_single', {'id': post.id}) }}">

                {% if post.cover %}
                <div class="img post-thumbnail">
                    <img src="{{ asset('uploads/images/' ~ post.cover) }}" alt="{{ post.title }}">
                </div>
                {% endif %}

                <h3><b class="text-capitalize">{{ post.title }}</b></h3>
                <p class="faded">{{ post.category.name }}</p>
            </a>
        </div>
    </div>
    {% endfor %}
    {% else %}
    <div class="col-md-12 col-12">
        <p class="lead text-center">No posts found :(</p>
    </div>
    {% endif %}
</div>
<br>
<hr>
<br>
<br>
<div class="row">
    <div class="col-md-8 col-12">
        {% if other_posts %}
        <h4>Other posts</h4>
        <br>
        {% for post in other_posts %}
        <a class="text-dark" href="{{ path('post_single', {'id': post.id}) }}">
            <div class="row align-items-center hover">
                <div class="col-md-4 col-12 mb-3">
                    {% if post.cover %}
                    <div style="height: 200px; width: 100%;" class="img thumbnail">
                        <img src="{{ asset('uploads/images/') ~ post.cover }}" alt="{{ post.title }}">
                    </div>
                    {% endif %}
                </div>
                <div class="col-md-8 col-12">
                    <h4>{{ post.title }}</h4>
                    <p>{{ post.content | striptags | replace({'&nbsp;': ' ', '&rsquo;': '\''}) | slice(0, 100) }}</p>
                </div>
            </div>
        </a>
        {% endfor %}
        {% endif %}
    </div>
    <div class="col-md-4 col-12">
        {% if popular and popular | length > 5 %}
        <div class="post dark">
            <p>Popular</p>
            <hr>
            <ul class="list-unstyled">
                {% for p in popular %}
                <li>
                    <a href="{{ path('post_single', {'id': p.id}) }}">
                        {{ p.title }} <br><small><i>{{ p.dateCreated | date('d/m/Y') }}</i></small>
                    </a>
                </li>
                {% endfor %}
            </ul>
        </div>
        {% endif %}

        {% if popular %}
        <div class="post dark">
            <p>Latest comments</p>
            <hr>
            <ul class="list-unstyled">
                {% for c in comments %}
                <li>
                    <a href="{{ path('post_single', {'id': c.post.id}) }}#comments">
                        {{ c.user.name }} <i class="faded">commented on</i> {{ c.post.title }}
                    </a>
                </li>
                {% endfor %}
            </ul>
        </div>
        {% endif %}

    </div>

</div>

{% endblock %}